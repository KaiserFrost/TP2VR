version: '3'

services:

    postgres:
      container_name: postgres_container
      image: postgres
      environment:
        POSTGRES_USER: ${POSTGRES_USER:-postgres}
        POSTGRES_PASSWORD: ${POSTGRES_PASSWORD:-postgres}
        POSTGRES_DB: ${POSTGRES_DB:-fileserverbd}
        PGDATA: /data/postgres
      volumes:
         - ./data.sql:/docker-entrypoint-initdb.d/init.sql
         - postgres:/data/postgres
      ports:
        - "6543:6543"
      networks:
        - postgres
      restart: unless-stopped
    auth-service:
      image: auth/auth:1.0
      networks:
        - postgres
        - httpnetwork
      ports: 
        - "5001:5001"
    httpservice:
      image: httpserver/httpserver:1.0
      networks: 
        - httpnetwork
      ports: 
        - "8001:8001"
networks: 
    postgres:
      driver: bridge
    httpnetwork:
volumes:
  postgres:
  
    
